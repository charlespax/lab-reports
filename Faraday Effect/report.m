#! /usr/bin/octave
% The line above may have to be removed for this script to work in MatLab

%===========================================================%
%--> Lab: The Faraday Effect                             <--%
%--> Author: Charles Edward Pax                          <--%
%--> Date: 2005.11.22                                    <--%
%--> Note: This file is created for use with GNU Octave, <--%
%--> but will most likely work with MatLab after a few   <--%
%--> changes to the plot commands.                       <--%
%===========================================================%
            
% email this to:
% chhejr@eden.rutgers.edu  % Joel
% naodell@eden.rutgers.edu % Nathan
% zfarman@eden.rutgers.edu
% brigid.farrell@gmail.com % Brigid



% "Blue" means 449.5 nm
% "Yellow" means 549.0 nm
% "Red" means 650.0 nm

close all
clear
clc

% Magnetic field (Page 19)
M_field  = [0.226,0.204,0.1796,0.1612,0.1395,0.1124,0.0881,0.0772,0.0640,0.0424,0.02560,0.01399,0.007690,0.00204,0.00145];
Amps     = [1.128,0.990,0.8830,0.7820,0.6680,0.5290,0.4090,0.3490,0.2820,0.1720,0.08800,0.03200,0.000000,-0.0300,-0.0480];

% Angles from 0 to 350 degrees in ten degree incriments.
angle = [0,10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350];

% This is with only the colored filter on the end and nothing else
% 449.5 nm (Blue)
%=====================
A0   = [-4.972,-4.965,-4.964];
A10  = [-4.255,-4.256,-4.255];
A20  = [-4.069,-4.067,-4.073];
A30  = [-4.195,-4.198,-4.198];
A40  = [-4.570,-4.571,-4.570];
A50  = [-5.185,-5.183,-5.182];
A60  = [-5.954,-5.945,-5.949];
A70  = [-6.747,-6.746,-6.753];
A80  = [-7.562,-7.567,-7.563];
A90  = [-8.179,-8.185,-8.180];
A100 = [-8.660,-8.629,-8.639];
A110 = [-8.885,-8.853,-8.852];
A120 = [-8.796,-8.788,-8.781];
A130 = [-8.460,-8.461,-8.469];
A140 = [-7.875,-7.884,-7.879];
A150 = [-7.148,-7.149,-7.148];
A160 = [-6.320,-6.319,-6.324];
A170 = [-5.515,-5.518,-5.515];
A180 = [-4.857,-4.857,-4.857];
A190 = [-4.416,-4.411,-4.407];
A200 = [-4.234,-4.227,-4.222];
A210 = [-4.313,-4.315,-4.308];
A220 = [-4.688,-4.691,-4.688];
A230 = [-5.311,-5.312,-5.315];
A240 = [-6.060,-6.060,-6.064];
A250 = [-6.874,-6.869,-6.863];
A260 = [-7.684,-7.691,-7.685];
A270 = [-8.328,-8.331,-8.318];
A280 = [-8.775,-8.773,-8.760];
A290 = [-8.983,-8.950,-8.891];
A300 = [-8.906,-8.914,-8.908];
A310 = [-8.571,-8.550,-8.539];
A320 = [-7.990,-7.976,-7.961];
A330 = [-7.202,-7.193,-7.209];
A340 = [-6.391,-6.405,-6.402];
A350 = [-5.625,-5.661,-5.646];
A = abs([mean(A0),mean(A10),mean(A20),mean(A30),mean(A40),mean(A50),mean(A60),mean(A70),mean(A80),mean(A90),mean(A100),mean(A110),mean(A120),mean(A130),mean(A140),mean(A150),mean(A160),mean(A170),mean(A180),mean(A190),mean(A200),mean(A210),mean(A220),mean(A230),mean(A240),mean(A250),mean(A260),mean(A270),mean(A280),mean(A290),mean(A300),mean(A310),mean(A320),mean(A330),mean(A340),mean(A350)]);
A_std = [std(A0),std(A10),std(A20),std(A30),std(A40),std(A50),std(A60),std(A70),std(A80),std(A90),std(A100),std(A110),std(A120),std(A130),std(A140),std(A150),std(A160),std(A170),std(A180),std(A190),std(A200),std(A210),std(A220),std(A230),std(A240),std(A250),std(A260),std(A270),std(A280),std(A290),std(A300),std(A310),std(A320),std(A330),std(A340),std(A350)];

% This is with only the colored filter on the end and nothing else
% 549.0 nm (yellow)
%===================
B0   = [-11.923,-11.899,-11.891,-11.890];
B10  = [-10.174,-10.146,-10.143,-10.148,-10.145,-10.144];
B20  = [-9.633,-9.632,-9.628,-9.625,-9.649];
B30  = [-9.766,-9.914,-9.989,-9.989,-9.989,-9.990,-9.901,-9.899,-9.888];
B40  = [-10.686,-10.894,-10.872,-10.876,-10.871,-10.867,-10.868];
B50  = [-12.418,-12.387,-12.394,-12.398,-12.390,-12.585];
B60  = [-14.235,-14.225,-14.229,-14.240,-14.232];
B70  = [-16.194,-16.178,-16.168,-16.158,-16.151];
B80  = [-18.122,-18.092,-18.099,-18.105,-18.121,-18.117,-18.099];
B90  = [-19.703,-19.684,-19.850];
B100 = [-20.517,-20.531,-20.511,-20.486,-20.492,-20.513];
B110 = [-20.957,-20.980,-20.975,-20.970,-20.961,-20.968];
B120 = [-20.813,-20.807,-20.796,-20.813,-20.816,-20.796,-20.795];
B130 = [-19.979,-20.013,-19.970,-20.13,-19.997];
B140 = [-18.535,-18.534,-18.563];
B150 = [-16.790,-16.774,-16.775,-16.776,-16.790,-16.780,-16.880];
B160 = [-14.847,-14.832,-14.838,-14.748,-14.848,-14.838];
B170 = [-12.910,-12.888,-12.884,-12.860,-12.883,-12.886,-12.878];
B180 = [-11.252,-11.257,-11.252,-11.213,-11.210,-11.210,-11.214,-11.213];
B190 = [-10.101,-10.104,-10.099,-10.090,-10.084];
B200 = [-9.629,-9.620,-9.616,-9.618,-9.626];
B210 = [-9.902,-9.890,-9.912,-9.869];
B220 = [-10.880,-10.885,-10.888,-10.882,-10.883];
B230 = [-12.500,-12.501,-12.516,-12.515,-12.530,-12.589];
B240 = [-14.464,-14.453,-14.445,-14.433,-14.552];
B250 = [-16.756,-16.786,-16.764,-16.753,-16.750,-16.747];
B260 = [-18.800,-18.768,-18.748,-18.738,-18.740,-18.717,-18.600,-18.737,-18.747,-18.727,-18.727,-18.720];
B270 = [-20.487,-20.559,-20.446,-20.741];
B280 = [-21.650,-21.647,-21.634,-21.643,-21.632,-21.665,-21.676];
B290 = [-22.116,-22.117,-22.133,-22.127,-22.099,-22.106,-22.057];
B300 = [-22.023,-22.016,-21.855,-21.861,-21.965];
B310 = [-21.177,-21.192,-21.174,-21.164,-21.176,-21.168];
B320 = [-19.762,-19.791,-19.806,-19.797,-19.784,-19.801,-19.791,-19.755,-19.757,-19.783];
B330 = [-17.894,-17.884,-17.864,-17.875,-17.880,-17.862,-17.866,-17.877];
B340 = [-15.740,-15.820,-15.797,-15.786,-15.789,-15.832,-15.947];
B350 = [-13.662,-13.642,-13.646,-13.647,-13.639,-13.627,-13.625];
B = abs([mean(B0),mean(B10),mean(B20),mean(B30),mean(B40),mean(B50),mean(B60),mean(B70),mean(B80),mean(B90),mean(B100),mean(B110),mean(B120),mean(B130),mean(B140),mean(B150),mean(B160),mean(B170),mean(B180),mean(B190),mean(B200),mean(B210),mean(B220),mean(B230),mean(B240),mean(B250),mean(B260),mean(B270),mean(B280),mean(B290),mean(B300),mean(B310),mean(B320),mean(B330),mean(B340),mean(B350)]);
B_std = [std(B0),std(B10),std(B20),std(B30),std(B40),std(B50),std(B60),std(B70),std(B80),std(B90),std(B100),std(B110),std(B120),std(B130),std(B140),std(B150),std(B160),std(B170),std(B180),std(B190),std(B200),std(B210),std(B220),std(B230),std(B240),std(B250),std(B260),std(B270),std(B280),std(B290),std(B300),std(B310),std(B320),std(B330),std(B340),std(B350)];

% This is with only the colored filter on the end and nothing else
% 650.0 nm (red)
%================
C0   = [-22.348,-22.478,-22.478,-22.394];
C10  = [-20.127,-20.188,-20.213,-20.217,-20.204,-20.196];
C20  = [-19.494,-19.544,-19.555];
C30  = [-19.729,-19.726,-19.783,-19.799,-19.802];
C40  = [-20.912,-20.938,-20.932,-20.909];
C50  = [-22.855,-22.852,-22.849,-22.845,-22.812];
C60  = [-25.112,-25.119,-25.152];
C70  = [-27.686,-27.681,-27.656,-27.655];
C80  = [-30.168,-30.282,-30.265,-30.222,-30.049,-30.082];
C90  = [-32.078,-32.101,-32.084,-32.083,-32.074];
C100 = [-33.380,-33.376,-33.382,-33.392];
C110 = [-33.919,-33.898,-33.911];
C120 = [-33.570,-33.596,-33.568,-33.552,-33.609];
C130 = [-32.504,-32.566,-32.533,-32.532,-32.540];
C140 = [-30.838,-30.864,-30.874];
C150 = [-28.631,-28.645,-28.635];
C160 = [-26.195,-26.150,-26.147,-26.181,-26.218,-26.224,-26.210,-26.205];
C170 = [-23.621,-23.650,-23.670,-23.616,-23.659];
C180 = [-21.623,-21.658];
C190 = [-20.306,-20.280,-20.269,-20.239];
C200 = [-19.640,-19.693,-19.700,-19.693,-19.689,-19.664];
C210 = [-19.977,-20.023,-20.017,-20.024,-20.013,-19.992,-19.981];
C220 = [-21.332,-21.280,-21.285,-21.304,-21.315];
C230 = [-23.236,-23.281,-23.245,-23.248,-23.244,-23.244];
C240 = [-25.616,-25.597,-25.621,-25.592];
C250 = [-28.345,-28.430,-28.466,-28.398,-28.440,-28.427,-28.439,-28.455,-28.416,-28.399,-28.409,-28.426];
C260 = [-30.717,-30.690,-30.688,-30.716,-30.754,-30.757,-30.720,-30.695,-30.704,-30.725];
C270 = [-32.596,-32.640,-32.612,-32.602,-32.606,-32.620,-32.616,-32.605,-32.601];
C280 = [-33.827,-33.822,-33.823,-33.828,-33.846,-33.831,-33.879,-33.864];
C290 = [-34.457,-34.472,-34.440,-34.432,-34.440,-34.413,-34.423];
C300 = [-34.188,-34.205,-34.246,-34.288];
C310 = [-33.224,-33.258,-33.235,-33.262,-33.296,-33.288,-33.300,-33.283];
C320 = [-31.444,-31.491,-31.424,-31.474,-31.526,-31.605,-31.605];
C330 = [-29.439,-29.487,-29.510,-29.473];
C340 = [-26.025,-27.008,-26.963,-26.958,-26.940,-26.955,-27.014];
C350 = [-24.546,-24.566,-24.559,-24.556,-24.524];
C = abs([mean(C0),mean(C10),mean(C20),mean(C30),mean(C40),mean(C50),mean(C60),mean(C70),mean(C80),mean(C90),mean(C100),mean(C110),mean(C120),mean(C130),mean(C140),mean(C150),mean(C160),mean(C170),mean(C180),mean(C190),mean(C200),mean(C210),mean(C220),mean(C230),mean(C240),mean(C250),mean(C260),mean(C270),mean(C280),mean(C290),mean(C300),mean(C310),mean(C320),mean(C330),mean(C340),mean(C350)]);
C_std = [std(C0),std(C10),std(C20),std(C30),std(C40),std(C50),std(C60),std(C70),std(C80),std(C90),std(C100),std(C110),std(C120),std(C130),std(C140),std(C150),std(C160),std(C170),std(C180),std(C190),std(C200),std(C210),std(C220),std(C230),std(C240),std(C250),std(C260),std(C270),std(C280),std(C290),std(C300),std(C310),std(C320),std(C330),std(C340),std(C350)];

% For Kiger glass at 650 nm and 0.240 amps to 0.224 amps. The amplitude changed over across the measurements
kiger_glass_angle_650   = [-40.0000,-30.0000,-20.0000,-10.0000,0.000000,10.00000,19.0000,30.00000,40.00000,50.00000,60.00000,70.00000,80.00000];
kiger_glass_voltage_650 = -1 * [-18.4689,-16.7306,-14.8305,-12.9582,-11.4122,-10.3886,-9.9910,-10.2981,-11.2833,-12.7932,-14.5514,-16.5410,-18.7373];

% For Kiger glass at 549 nm and 0.236 amps to 0.253 amps. The amplitude changed over across the measurements
kiger_glass_angle_549   = [240.000,250.000,260.000,270.000,280.0000,290.0000,294.0000,300.000,310.000,320.000,330.000,340.000,350.000];
kiger_glass_voltage_549 = -1 * [-6.8831,-7.8572,-8.7790,-9.5723,-10.0748,-10.2478,-10.2119,-9.9478,-9.4281,-8.7416,-7.8377,-6.8907,-5.9733];

% Part 2: For 549 nm using no sample at 290 degrees.
part_2_voltage   = -1 * [-33.5707,-33.5984,-33.3327,-33.4246,-33.6215,-33.6315,-33.6999,-33.6616,-33.6538,-33.7117,-33.7258,-33.6902,-33.6166,-33.3789,-33.3975,-33.4656,-33.6455,-33.7808,-33.8018];
part_2_amplitude = [0.004000,0.014000,0.160000,0.300000,0.477000,0.745000,0.909000,1.123000,1.341000,1.667000,1.889000,2.116000,2.361000,-0.10200,-0.26400,-0.55500,-0.77400,-1.09300,-1.58400];
% For 549 nm using BK 0.956 cm sample at 290 degrees.
part_2_voltage_BK = -1 * [-28.7611,-28.8368,-28.8708,-28.8931,-28.8277,-28.8139,-28.8235,-28.8096,-28.8172];
part_2_current_BK = [0.003000,0.034000,0.182000,0.355000,0.560000,0.770000,1.012000,1.412000,1.874000];

% For (BK7 0.956 cm sample)
BK7_0956_cm_angle = [240,230,220,210,200,190,180,170,160,150,140];
BK7_0956_cm_4495_voltage = -1 * [-7.4632,-6.5838,-5,8843,-5.4532,-5.3374,-5.4023,-5.5117,-5.9986,-6.7265,-7.6217,-8.5460,-9.3449];
BK7_0956_cm_5490_voltage = -1 * [-10.7081,-9.0872,-7.7476,-6.9406,-6.6706,-7.1003,-8.1428,-9.5394,-11.2023,-12.8660,-14.4759];
BK7_0956_cm_6500_voltage = -1 * [-12.5409,-11.0956,-9.9139,-9.1882,-8.9712,-9.3879,-10.2589,-11.4647,-13.0036,-14.5616,-16.0514];

% For SF8 (1.272 cm) 650 nm and 0.380 amps
SF8_650_angle = [260,250,240,230,220,210,200,190,180,170,160,150,140,130];
SF8_650_voltage = -1 * [-23.4142,-21.5174,-19.2382,-17.1404,-15.4067,-14.3292,-14.0456,-14.8307,-16.2403,-18.0499,-20.0744,-22.4530,-24.4114,-25.8715];
% For SF8 (1.272 cm) 549 nm and 0.380 amps
SF8_549_angle = [240,230,220,210,200,190,180,170,160,150,140];
SF8_549_voltage = -1 * [-10.7985,-9.1766,-7.8484,-7.0354,-6.8753,-7.2959,-8.3298,-9.8037,-11.5348,-13.2125,-14.7751];
% For SF8 (1.272 cm) 449.5 nm and 0.380 amps
SF8_449_angle = [250,240,230,220,210,200,190,180,170,160,150,140,130];
SF8_449_voltage = -1 * [-7.6542,-6.7246,-5.9228,-5.2509,-4.8095,-4.7294,-4.9505,-5.7927,-6.2241,-7.1281,-8.2421,-9.0156,-9.6214];

% This is for the kigre (k) and flint (f)
% 0 Amps.
%=========
B_k_0 = [6.39,5.16,4.70,4.91,5.910,7.440,9.430,11.45,13.31,14.99,16.01,16.41,16.15,15.27,13.78,11.90,9.930,8.01,5.16,4.71,4.95,5.59,7.510,9.500,11.54,13.49,14.99,16.12,16.50,16.40,15.51,13.99,12.13,10.19,8.070,6.39];
B_f_0 = [8.57,7.15,6.55,8.17,10.21,12.61,15.11,17.45,19.43,20.61,21.13,20.78,19.67,17.85,15.55,13.02,10.60,8.49,7.25,6.53,6.94,8.21,10.22,12.68,15.23,17.59,19.51,20.77,21.27,20.99,19.99,18.07,15.73,13.26,10.75,8.57];

% 0.5 Amps.
%===========
B_k_05 = [7.66,6.55,6.25,6.01,6.53,7.17,8.42,9.62,11.1,12.4,13.4,14,14.2,13.7,13,11.8,10.4,9,7.67,6.62,6.09,5.81,6.17,6.98,8.13,9.54,11.1,12.2,13.2,13.8,13.9,13.8,12.8,11.7,10.36,9];
B_f_05 = [9.14,8.38,7.92,8.11,9.04,10.5,12.3,13.7,15.5,16.9,18,18.4,18.1,17.4,16,14.3,12.4,10.9,9.15,8.14,7.8,7.98,8.86,10.1,11.98,13.81,15.5,16.9,17.8,18.3,17.9,17.2,15.9,14.2,12.3,10.5];

% 1 Amps.
%===========
B_k_1 = [9.67,8.43,7.43,6.43,6.6,7.4,8.86,10.7,12.9,14.7,16.4,17.6,18.1,18,17.1,15.9,14.1,12,10.3,8.3,7.02,6.36,6.39,7.27,8.74,10.4,12.4,14.3,15.7,17,17.5,17.4,16.6,15.3,13.5,11.48];
B_f_1 = [9.83,8.67,8.38,9.04,10.4,12.4,14.5,17.15,19.5,21.1,22.1,22.4,21.4,20.5,18.7,16.4,13.9,11.6,9.92,8.52,8.15,8.74,10.1,12,14.3,16.7,18.8,20.4,21.3,21.6,21.1,19.9,18.1,15.88,13.5,11.12];

% 1.5 Amps.
%===========
B_k_15 = [9.22,7.31,5.81,4.97,4.83,5.410,6.730,8.390,10.45,12.42,14.17,15.45,16.29,16.24,15.28,14.30,12.50,10.86,8.76,7.00,5.68,4.76,4.62,5.260,6.460,8.180,9.980,12.05,13.59,14.88,15.58,15.67,15.03,13.79,11.97,10.03];
B_f_15 = [7.60,6.75,6.65,7.71,9.35,11.64,14.21,16.63,18.67,20.24,20.97,20.94,20.06,18.55,16.25,13.79,11.32,9.150,7.49,6.48,6.49,7.38,9.10,11.26,13.75,16.23,18.25,19.62,20.43,20.31,19.46,17.97,15.69,13.24,10.85,8.420];

% 2.0 Amps.
%===========
B_k_2 = [9.30,7.43,6.02,5.01,4.79,05.24,06.28,07.92,09.84,11.90,13.78,15.08,15.79,15.87,15.49,14.46,12.87,11.06,9.03,7.31,5.80,4.97,4.67,05.07,06.22,07.83,09.71,11.72,12.31,14.73,15.30,15.76,15.15,14.03,12.57,10.76];
B_f_2 = [7.37,6.52,6.58,7.57,9.33,11.42,13.95,16.17,18.28,19.81,20.67,20.54,19.62,18.02,15.96,13.54,11.05,08.92,7.28,6.47,6.57,7.51,9.24,11.33,13.81,16.12,18.12,19.58,20.19,20.22,19.30,17.69,15.49,13.14,10.65,08.56];

%======================================%
%--> Section: Plots                 <--%
%--> This section creates the plots <--%
%--> to be used in the report.      <--%
%======================================%
figure(1); % Plot from page 19. M field vs. voltage.
clearplot % Octave command
%gset size  0.65
gset terminal epslatex color
gset output "plot01-MField.eps"
hold on
xlabel('Voltage (V)')
ylabel('M Field (Telsa)')
plot(Amps,M_field,'o;;',[-0.05,1.128],[0,1.128/5],';;')
hold off
%pause
closeplot % Octave command

figure(2);
clearplot % Octave command
%gset size  0.65
gset key box
gset terminal epslatex color
gset output "plot02-ZeroCurrent.eps"
hold on;
xlabel('Polarization degree (degrees)')
ylabel('Light intensity (mV)')
plot(angle,A,'x;449.5 nm;g',angle,B,'+;549.0 nm;m',angle,C,'*;650.0 nm;r')
hold off;
%pause;
closeplot % Octave command

figure(3);
clearplot % Octave command
%gset size  0.65
gset key box
gset terminal epslatex color
gset output "plot03.eps"
gset key left
hold on
xlabel('Angle (deg)');
ylabel('Intensity (mV)');
plot(angle,B_k_0,';0.0 Amp;',angle,B_k_05,';0.5 Amp;',angle,B_k_1,';1.0 Amp;',angle,B_k_15,';1.5 Amp;',angle,B_k_2,'o;2.0 Amp;');
hold off
%pause
closeplot % Octave command

figure(4);
clearplot % Octave command
%gset size 0.65
gset key box
gset terminal epslatex color
gset output "plot04.eps"
gset key left
hold on
xlabel('Angle (deg)');
ylabel('Intensity (mV)');
plot(angle,B_f_0,';0.0 Amp;',angle,B_f_05,';0.5 Amp;',angle,B_f_1,';1.0 Amp;',angle,B_f_15,';1.5 Amp;',angle,B_f_2,'o;2.0 Amp;');
hold off
%pause
closeplot % Octave command


kigre_mag_field = [0,55.9,93.2,135.5,173.6,209,245.5,288.1,329,367,409];
kigre_min_angle = [21.5,20.3,19.1,18,16.6,15.2,14,12.8,11.5,10,10];

flint_mag_field = [0,55.9,93.2,135.5,173.6,209,245.5,288.1,329,367,409];
flint_min_angle = [22,20.8,20,18.9,17.8,16.8,15.6,14.4,13.4,12.2,11.8];

figure(5);
clearplot % Octave command
%gset size 0.65
gset key box
gset terminal epslatex color
gset output "plot05.eps"
%gset key left
hold on
xlabel('Magnetic field (mT)');
ylabel('Minimum analyzer angle (degrees)');
plot(kigre_mag_field,kigre_min_angle,'o;Kigre;1',[kigre_mag_field(1),kigre_mag_field(11)],[kigre_min_angle(1),kigre_min_angle(11)],';;r',flint_mag_field,flint_min_angle,'o;Flint;2',[flint_mag_field(1),flint_mag_field(11)],[flint_min_angle(1),flint_min_angle(11)],';;m');
hold off
%pause
closeplot % Octave command

Verdet = [0.3749,0.2832,0.1874,0.2832,0.5313,0.2771,0.5623,0.4248,0.5313,0.2771,0.05623,0.4248];
mean(Verdet)
std(Verdet)
%pause
close all
